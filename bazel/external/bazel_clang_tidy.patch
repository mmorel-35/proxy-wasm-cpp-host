# 1. Treat .h files as C++ headers.
# 2. Remove -stdlib=libc++ to use system libstdc++ for clang-tidy compatibility.

diff --git a/clang_tidy/clang_tidy.bzl b/clang_tidy/clang_tidy.bzl
index 3a5ed07..e9f6072 100644
--- a/clang_tidy/clang_tidy.bzl
+++ b/clang_tidy/clang_tidy.bzl
@@ -16,6 +16,13 @@ def _run_tidy(ctx, exe, flags, compilation_context, infile, discriminator):
     # add source to check
     args.add(infile.path)
 
+    # treat .h files as C++ headers
+    args.add("--extra-arg-before=-xc++")
+    
+    # Use system libstdc++ instead of hermetic libc++ for clang-tidy
+    # This ensures compatibility with system clang-tidy-18
+    args.add("--extra-arg=-stdlib=libstdc++")
+
     # start args passed to the compiler
     args.add("--")
 
